## 🔔 Basic
Direct Light : 빛이 광원에서 오브젝트로 직접 닿는 경우<br>
Indirect Light : 빛이 반사 또는 산란되어 오브젝트에 닿는 경우<br>

👉 **조명 구성요소**<br>
1. 기본광 : Directional, Point, Spot, Area Light..<br>
-> Area는 Bake해야만 조명효과가 나타남.(간접 조명에 적합)<br>

2. 환경광(Ambient Light) : 씬의 모든 오브젝트를 비춘다.<br>

3. Emissive Surface : 메터리얼의 발광효과.<br>

4. Probes : Light Probes, Reflection Probes..<br>
<br>
<br>

👉 **Light Mode**<br>
1. **Realtime(실시간)** ⭐ : 실시간 라이팅 연산. 성능에 가장 큰 영향을 준다.<br>
-> **직접 광원**만 적용하고 간접 광원과는 관계가 없다.<br>
-> 다른 조명과 연관없이 단독으로 적용되기에 반사광 효과도 없으며 따라서 실시간 조명으로 생기는 그림자는 
검은색으로 표현된다.<br> 
(Realtime GI 옵션을 체크해야 함)<br>

2. **Baked** ⭐ : 미리 연산되어 저장된 라이트. 런타임상에 동적으로 움직이는 물체에는 적용 할 수 없다.<br>
-> 런타임에 업데이트되지 않으므로 씬의 동적인 변화를 반영하기 힘들다.(**모바일에 적합**)<br>
-> **동적 객체의 조명효과는 Light Probe**를 통해 적용해야 한다.<br>

3. **Mixed** ⭐ : Baked와 Realtime 모드 혼합. **라이트맵 + 동적인 오브젝트**에도 라이트 적용하고자 할때<br>
<br>
<br>

👉 **Mixed Lighting Mode**<br>
좋은 포스팅 https://illu.tistory.com/1214 , https://ozlael.tistory.com/81<br>
<br>

1. **Baked Indirect** ⭐ : 간접 광원만 미리 계산해서 베이크 처리한다. (그림자 x)<br>
-> Mixed 모드 조명의 직접 광원은 실시간 조명의 기능을 유지한다.<br>
-> static 처리된 건물과 캐릭터의 그림자가 실시간으로 처리된다.<br>
-> **즉, 그림자와 직접 광원은 실시간으로 처리하고 GI만 미리 연산해놓고 싶은 경우 이 모드를 사용한다.**<br>
-> 그림자가 중요하다면 사용하고 Directional light의 그림자는 처리되지 않는다. (**모바일 부적합**)<br>
-> 높은 수준의 라이팅을 구울 수 있다.<br>

2. **Subtractive** ⭐ : 정적 객체의 직/간접 광원, Light probe, 그림자를 모두 라이트맵에 베이크 처리한다.<br>
-> Mixed 모드 조명의 실시간 조명 기능이 유지되지 않는다. (**모바일에 적합** ⭐)<br>
-> **정통적인 라이트맵**으로 **스태틱 오브젝트에는 실시간 라이팅이 이루어지지 않게 된다.**<br>
-> 베이킹된 건물 그림자에 실시간 캐릭터 그림자가 그려지는 **부자연스러운 모습**을 보일 수 있다.<br>
-> 이는 실시간 그림자의 컬러를 조절해서 이질감을 줄여야 한다.<br>

3. **Shadowmask** ⭐ : 간접 광원과 Light Probe는 라이트맵에 베이크 처리.<br>
-> Mixed 모드 조명의 직접광원은 실시간 조명 기능을 유지한다.<br>
-> 라이트맵 베이킹 시 **그림자 영역을 별도의 텍스처**로 따로 저장한다.<br>
<br>
<br>


## 🔔 Light Map
좋은 포스팅 https://chulin28ho.tistory.com/441?category=458928 <br>
<br>

<img src="https://user-images.githubusercontent.com/43705434/126761740-2177f81c-9c2e-459a-9855-531491de65be.PNG" width="800" height="350"><br>
<br>

라이트맵은 빛의 방향과 세기에 따라 생성되는 빛을 받는 오브젝트의 그림자, 반사면, 면의 밝기 차이 등의<br>
⭐ **라이팅 정보를 사전에 저장하는 텍스처를 의미한다.** ⭐<br>

기본적으로 플레이어가 바라보는 시야 및 씬의 환경 배치, 광원의 수와 조도 등에 따라서 화면에 출력되는 빛은<br>
시시각각 다르게 보여지게 되며, 이를 시각적으로 처리하는 연산에는 빛의 입자 정보를 일일히 따져보아야 하는 **상당한<br>
부하가 수반된다.**<br>

고로 최대한 효율적으로 빛을 처리하고 퍼포먼스를 보장하기 위해서 고안된 방법이 라이트 정보를 미리 오브젝트의<br>
텍스처에 "라이트맵"이라는 별도의 채널로 저장하여 마치 빛을 받고있는 듯 보이게 하는 것이다.<br>

⭐⭐ **요약하자면, 실시간으로 빛에 의한 변화를 계산하기에는 엄청난 연산과 비용을 요구하기 때문에 이를 미리 계산하여<br>
정보를 가지고있는 하나의 텍스처를 이용해 빛이 존재하는것 처럼 효과를 주는 라이팅 처리 방식이다.** ⭐⭐<br>
<br>
<br>

👉 **라이트 맵 적용 과정**<br>

1. 실시간 조명들의 모드를 Mixed로 설정 후 꺼 놓는다.<br>
-> 보통 실시간 조명(캐릭터 그림자)과 라이트맵을 같이 사용하는 경우가 많기 때문<br>
-> Culling Mask는 실시간 조명을 받을 대상들의 레이어만 체크해준다.<br>
-> 베이크하는 동안 실시간 조명은 필요없으니 꺼둔다.<br>

<img src="https://user-images.githubusercontent.com/43705434/126761486-c5e9adc0-1677-4959-9478-9134f2e8a3c9.PNG" width="300" height="450"><br>
<br>
<br>

2. 라이트맵 베이크용 조명 설정<br>
-> 라이트맵 조명은 모드를 Baked로 설정하고 Culling Mask는 라이트맵을 베이크할 때 적용될<br>
오브젝트 레이어를 지정해준다.<br>

<img src="https://user-images.githubusercontent.com/43705434/126761491-03864f27-c67a-483b-9f49-147802b7c463.PNG" width="300" height="250"><br>
<br>
<br>

3. 라이트맵 채널 생성<br>
-> 메쉬의 모델 - Generate Lightmap UVs를 체크해 주면, 라이트맵 베이크에 필요한 UV 채널이 자동으로 생성됨.<br>

<img src="https://user-images.githubusercontent.com/43705434/126761492-ea3a639a-6054-4061-bf4f-d43e0a476419.PNG" width="300" height="550"><br>
<br>
<br>

4. Static 설정<br>
-> 씬에 배치된 오브젝트 Lightmap Static or Contribute GI를 체크해준다. (라이트맵 대상을 알리는 것임.)<br>

<img src="https://user-images.githubusercontent.com/43705434/126761493-c8548247-7980-4ff0-ad27-1b394f814bd5.PNG" width="300" height="250"><br>
<br>
<br>

5. Scale 확인하기<br>
-> 라이트맵 대상 오브젝트들의 Mesh Renderer에서 Lightmap Static을 체크하고 Scale 값을 조절한다.<br>
-> 기본값은 1이지만 중요하지 않은 또는 작은 오브젝트는 수치를 낮춰주는게 좋다.<br>

<img src="https://user-images.githubusercontent.com/43705434/126761495-6a4d60fd-1911-4886-8a60-265bb0c3309d.PNG" width="300" height="250"><br>
<br>
<br>

6. Lighting 옵션을 설정한다.<br>
-> 라이팅 모드와 라이트맵 픽셀의 밀도, 라이트맵 텍스처의 최대 크기 등을 조절<br>

<img src="https://user-images.githubusercontent.com/43705434/126761496-e0ab724a-af61-40cb-a44f-c41b945b30df.PNG" width="300" height="550"><br>
<br>
<br>

7. 베이크!<br>
<br>
<br>

## 🔔 Light Probe

<img src="https://user-images.githubusercontent.com/43705434/126761738-92d06a72-6b0f-413a-a13e-360bde1ca6ad.PNG" width="800" height="450"><br>
<br>

라이트맵은 효과적이지만 동적 오브젝트에 적용되지 않는다는 한계점이 존재하는데, 이를 라이트 프로브로 보완 할 수 있다.<br>
⭐⭐ **라이트 프로브는 라이트맵을 베이킹할 때 주변의 광원 데이터를 저장해두고 런타임 시 근처를 지나는 동적 객체에<br>
데이터를 전달해서 객체의 색상과 보간하여 마치 실시간 조명과 같은 효과를 낼 수 있다.** ⭐⭐<br>
(미리 주변 빛의 값들을 연산해서 갖고 있기 때문에 실시간 라이팅보다 가벼울 수 밖에 없다. ⭐ )<br>
<br>
<br>

## 🔔 GI (전역 조명)

![GI](https://user-images.githubusercontent.com/43705434/126761744-1335beee-516f-480c-9b64-e45330012760.PNG)<br>
<br>

빛이 표면에 닿으면 해당 빛은 표면에서 반사, 투과, 굴절 등의 상호작용을 하게 된다.<br>
이러한 과정에서 빛은 자신이 갖고 있던 성질에 변화가 생긴다. 진행방향이나 색이 변할 수 있다는 것.<br>
이것을 달리 얘기하면 빛이 닿은 표면은 해당 광원의 정보와 자신의 재질 특성을 적용한 새로운<br>
광원이 될 수 있다는 의미가 된다. 이러한 것을 시물레이션하여 ⭐ **빛이 여러 물체에 반사되어 다른 물체에<br>
영향을 주는 것을 계산하는 방식을 전역 조명이라 한다.**<br>

GI는 어떻게 빛이 표면들로부터 튕겨져나와 다른 표면에 닿는지(간접 조명)를 모델링해주는 시스템으로<br>
⭐ **즉 간접광까지 표현하는 방식을 의미한다.**<br>
**매우 높은 처리량**을 요구하기 때문에 실시간으로 사용하려면 여러 제약과 대안을 필요로한다.<br>
<br>

게임에서 이를 사용하기 위해서는 **고정적일 것으로 예상되는 물체와 표면들에 대해서만 간접조명을 계산하는 방식**을 사용할 수 있다.<br>
유니티는 이 기법을 **Baked GI** (또는 baked lightmap)이라는 이름으로 지원한다.<br> 
<br> 
<br> 

👉 **Baked GI** ⭐ <br>
**고정된 빛에 의한 간접광을 라이트맵으로 구워 게임 오브젝트 위에 미리 입힌다.** ⭐<br>
반영된 간접광 효과는 게임 도중에 **실시간으로 반영되지 않는다.**<br>
실시간 글로벌 일루미네이션 보다 표현의 질과 런타임 성능이 더 좋다.<br>
**빛의 방향이 게임 도중이 달라져도 간접광에 반영되지 않는다.**<br>
게임 도중에 갑자기 주변이 밝아지거나 어두워지면 이질감을 느낄 수 있다.<br> 
-> 리얼타임에 갱신해야된다는 압박이 없기 때문에 퀄리티가 좀 더 높은 것.<br>
<br>

<img src="https://user-images.githubusercontent.com/43705434/126761851-44c5a6ba-9141-4dd8-871c-531855f362ba.PNG" width="650" height="350"><br>

static인 물체에만 간접광이 적용되는 모습을 볼 수 있다.<br>
-> Light Probe로 동적인 물체에도 간접광 적용 가능<br>
<br>
<br>

👉 **Realtime GI** ⭐ <br>
**빛의 세기와 방향 등이 달려졌을 때 그 변화를 간접광에 실시간으로 반영한다.**<br>
실시간 글로벌 일루미네이션을 사용하려면 ⭐ **라이트 맵을 여러 방향에 대해 생성해야 한다.<br>
그리고 여러 가지 경우에 대한 빛의 예상 반사 방향과 광원의 예상 이동 경로 등의 정보를 미리 계산해서 저장한다.<br>
이렇게 미리 계산된 정보 덕분에 게임 도중 물체 표면에 들어오는 빛의 방향 등이 달라져도 간접광이 어떤 방향에<br>
어떤 세기로 반사되어야 하는지 적응 비용으로 추측할 수 있으며, 광원의 변화를 실시간으로 간접광에 반영할 수 있다.** ⭐<br>
결론적으로 실시간 글로벌 일루미네이션을 사용해도 미리 계산해야 하는 정보가 있으므로 라이팅 데이터 에셋을 구워야 한다.<br>
-> ⭐ **진정한 의미의 실시간 GI는 아니다. 전부 미리 계산된 정보를 가지고 적은 비용을 가지고 갱신하기 때문이다.**<br>
<br>

당연하게도 위 2가지 GI는 static 오브젝트에만 간접광을 반영한다.<br>
<br>
<br>
