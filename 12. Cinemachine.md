## Cinemachine
시네머신은 카메라의 움직임을 손쉽게 제어할 수 있는 유니티 공식 패키지이다.<br>
-> 복잡한 코드없이 간편하게 다양한 카메라 연출을 사용할 수 있다.<br>
<br>
<br>

**Camera**<br>

* Brain 카메라<br>
게임 월드를 실제로 촬영하는 카메라로 씬 안에 단 하나만 존재해야 한다.<br>

* Virtual 카메라<br>
Brain 카메라의 분신 역할이 되며 씬의 여러 곳에 존재한다.<br>
실제 카메라로 동작하지는 않으며, 단지 Brain 카메라가 사용할 여러가지 설정값을 제공한다.<br>

Brain 카메라는 Virtual 카메라들 중 하나를 선택해서 현재 활성화 된 카메라로 지정하여 해당 Virtual 카메라로 이동하여 촬영한다.<br>
즉 가상 카메라들은 Brain 카메라가 특정 상황에 사용해야 할 설정값들을 미리 지정해두는 역할을 하는 것이다.<br>
<br>

Brain 카메라가 선택한 Virtual 카메라로 이동하는 과정에서 시점은 부드럽게 이동된다.<br>
-> Virtual 카메라의 설정값들이 Brain 카메라의 설정 값이 됨.<br>
<br>

* FreeLook 카메라<br>
Virtual Camera에서 좀 더 확장된 카메라로 3인칭 카메라를 위한 파라미터들이 추가로 구현되어 있다.<br>

확장되어 구현된 가상 카메라들이 이외에도 많이 존재함.<br>
<br>
<br>

**Field**<br>

* Follow 필드<br>
가상 카메라는 Follow 필드에 할당된 게임 오브젝트를 따라다닌다.<br>
따라다니기 위해서 가상 카메라의 위치를 변경한다.<br>
<br>
 
* LookAt 필드<br>
Look At 필드에 할당된 게임 오브젝트를 주시한다.<br>
주시하기 위해서 가상 카메라의 회전을 변경한다.<br>
<br>
<br>

**Zone**<br>

![시네머신](https://user-images.githubusercontent.com/43705434/126930059-4bc96072-309e-4d7e-b923-7e821d750b24.PNG)<br>
<br>

Look at으로 주시할 대상을 할당하면 게임창 화면에 그리드가 보이게 되는데 각 칸 영역을 다음과 같이 부른다.
정 가운데 1칸 👉 데드존
주시 대상(노란 점)이 데드존 내에서 움직이는 동안에는 카메라가 회전하지 않는다.
그 주위 8칸 👉 소프트존
주시 대상(노란 점)이 소프트존 내에서 있다면 카메라 부드럽게 스무스하게 회전하여 주시 대상이 데드존 안으로 들어가게끔 한다.
테두리 👉 하드리밋
주시 대상(노란 점)이 소프트존 내에서 있다면 카메라 부드럽게 스무스하게 회전하여 주시 대상이 데드존 안으로 들어가게끔 한다.
화면에서 더 바깥에 있으니 소프트존보다 더 빠르고 격한 속도로 회전될 것이다.
따라서 데드존이 클 수록 화면은 느리고 부드럽게 움직이며 데드존이 작을 수록 화면은 빠르고 격하게 움직인다.

데드존, 소프트존, 하드리밋
소프트존, 하드리밋은 가상 카메라의 자연스러운 추적을 구현할 때 사용한다.
카메라가 주시하는 물체가 화면의 데드존에 있으면 카메라가 회전하지 않는다.
주시하는 물체가 화면의 소프트존에 있으면 물체가 화면의 조준점(Aim)에 오도록 카메라가 부드럽게 회전한다.
주시하는 물체가 빠르게 움직여서 소프트존을 벗어나 하드리밋에 도달하면 카메라가 격하게 회전한다.
카메라가 주시하는 물체는 화면의 소프트존을 벗어나지 않는다.
데드존과 소프트존의 크기를 줄이면 물체가 조금이라도 화면 중앙응 벗어나려 할 때 지연시간없이 카메라가 즉시 물체를 향해 회전한다. 하지만 화면의 움직임이 딱딱하게 느낄 수 있다.
데드존과 소프트존의 크기를 늘리면 물체를 쫓는 화면의 움직임이 느리게 느껴진다.
<br>
<br>

**Camera Collider**<br>

![시네머신콜라이더](https://user-images.githubusercontent.com/43705434/126930062-80a5de9a-8487-4bb3-b224-c28d85c791ee.PNG)<br>
<br>

카메라 콜라이더Permalink
카메라가 충돌될 수 있는 물체들을 피해서 플레이어를 추적할 수 있도록 하기

3인칭 카메라가 플레이어를 따라다니다가 벽이나 다른 물체들 같은 곳에 파묻혀서 플레이어를 못찍게 될 수 있으므로 이를 피해야 한다.
⭐ 카메라에게 가상의 Collider를 할당하여 충돌 처리가 일어나면 파묻히지 않고 피하도록 해야 한다.
예를 들어 카메라가 플레이어를 쫓다가 벽과 충돌하면 벽에 파묻히는게 아니라 벽과의 충돌을 느끼고 벽 표면에서 카메라를 추적하도록
카메라와 플레이어 사이에 있는 물체도 감지하여 물체가 플에이어를 찍는데 가리지 않도록 한다.
카메라와 플레이어 사이에 물체가 있으면 자동으로 뛰어 넘어야 함.
Cinemachine Free Look
가장 하단에 Extensions
Add Extension 에서 CinemachineCollider 확장 기능을 선택하면 Collider 컴포넌트가 카메라에 붙게 된다.

이 컴포넌트만 붙어있으면 알아서 1. 충돌되는 물체에 파묻히지 않도록, 2. 카메라와 플레이어 사이에 있는 물체가 카메라를 가리지 않도록 피해준다.
Ignore Tag에서 Player를 선택해준다.
카메라가 플레이어는 피하면 안되니까 !
